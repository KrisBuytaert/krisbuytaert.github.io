<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">

<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Everything is a Freaking DNS problem | Devops Needs Sushi</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/blog/blogapi/rsd/index.html" />
<link rel="alternate" type="application/rss+xml" title="Everything is a Freaking DNS problem RSS" href="/blog/rss/index.xml" />
<link rel="shortcut icon" href="/blog/misc/favicon/index.ico" type="image/x-icon" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/modules/aggregator/aggregator/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/modules/node/node/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/modules/poll/poll/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/modules/system/defaults/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/modules/system/system/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/modules/system/system-menus/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/modules/user/user/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/sites/all/modules/cck/theme/content-module/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/sites/all/modules/date/date/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/sites/all/modules/geshifilter/geshifilter/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/misc/farbtastic/farbtastic/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/sites/all/modules/calendar/calendar/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/sites/all/modules/cck/modules/fieldgroup/fieldgroup/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/sites/all/modules/views/css/views/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/sites/default/themes/barlow/typography/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/sites/default/themes/barlow/layout/index.css?i" />
<link type="text/css" rel="stylesheet" media="all" href="/blog/sites/default/themes/barlow/style/index.css?i" />
<link type="text/css" rel="stylesheet" media="print" href="/blog/sites/default/themes/barlow/print/index.css?i" />
</head>

<body class="front not-logged-in page-node one-sidebar sidebar-left">
<div id="wrapper">

<div id="header" class="p1">

  <div id="branding">
      <div id="logo">
    <a href="/blog/index/index.html" title="Everything is a Freaking DNS problem" rel="home">
    <img src="/blog/files/me_small/index.jpg" alt="Everything is a Freaking DNS problem" id="logo-image" />
    </a></div>
        <h1><a href="/blog/index/index.html" title="Home" rel="home">Everything is a Freaking DNS problem</a></h1>
        <div class="slogan">Devops Needs Sushi</div>
    </div>

  
  <div class="skip"><a href="#content" title="Skip to site content" accesskey="2">Skip to content</a></div>

  
  <div id="menu">
      </div>
</div>

<div id="content">

  <div id="sidebar-left" class="sidebar">
  <div class="block block-block" id="block-block-5">
  <div class="content"><p>This is the blog where <a href="http://www.krisbuytaert.be/bio.shtml">Kris Buytaert</a> points you to extremely interresting and totally irrelevant stuff that happens in Life , The Universe and Everything</p>
<p>Questions, want to contact me please read my <a href="/blog/faq/index/index.html">FAQ</a> and  <a href="/blog/social/index/index.html">Social Media Policy</a></p>
<p>You can hire me! I work as a consultant for <a href="http://www.inuits.eu/">Inuits.eu</a></p>
<p><a href="/blog/rss/index.xml">Feed</a></p>
</div>
</div>

  </div>

<div id="main">
<div class="content">
<div id="node-1055" class="node teaser blog cal">
    <acronym class="calendar published" title="2011-12-29T19:31:03+01:00">
  <span class="month">Dec</span>
  <span class="day">29</span>
    <span class="year">2011</span>
    </acronym>
    <h2 class="title"><a href="/blog/installing-vagrant-ubuntu-natty/index.html">Installing Vagrant, on Ubuntu Natty</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1467 first"><a href="/blog/category/ran/index.html" rel="tag" title="">ran</a></li>
<li class="taxonomy_term_916"><a href="/blog/taxonomy/term/916/index.html" rel="tag" title="">ubuntu</a></li>
<li class="taxonomy_term_1439 last"><a href="/blog/category/vagrant/index.html" rel="tag" title="">vagrant</a></li>
</ul></span>
        </div>
  <div class="content"><p>(Warning some Ubuntu ranting ahead) </p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">apt-get install virtualbox-ose </div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">apt-get install rubygems</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">gem install vagrant</div></li></ol></pre></div></p>
<p>That's what I assumed it would take me to install vagrant on a spare Ubuntu (Natty) laptop.</p>
<p>Well it's not.   after that I was greeted with some weirdness.</p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">$vagrant</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">vagrant: command not found...</div></li></ol></pre></div></p>
<p>Yet gem list --local showed the vagrant gem installed.</p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">$ruby</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">ruby:  command not found</div></li></ol></pre></div></p>
<p>I looked twice, checked again and indeed it seems you can install rubygems on natty with no  ruby installed  #dazedandconfused</p>
<p>So unlike other distro's on Ubuntu doesn't add the rubygems binary path to it's default path<br />
After  adding that to my .bashrc things started working better.</p>
<p>The active reader has noticed that by now half of the Twittersphere was pointing me to the already implemented<br />
above solution and the other half was telling me to not install rubygems using apt-get, or to use rvm for all my rubygem troubles</p>
<p>Apart from the point that if you need tools to like rvm to fix things that are fundamentally broken,  the fact is that joe average java developer doens't want to be bothered with  RubyGem hell  , he just wants to do apt-get install Vagrant and get on with his real work,  and that's exactly what I'd expect from   Linux for human beings</p>
<p>I'd expect any junior guy to be able to go to vagrantup.com  read the 4 commands on the main page and be up and running<br />
Coz that's how it works on my  Bleeding Edge Enterprise Development Distro,  the one I usually would not advise those people (and my mother) to use.</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="/blog/installing-vagrant-ubuntu-natty/index.html#comments" title="Jump to the first comment of this posting.">2 comments</a></li>
</ul></div>
</div>
<div id="node-1054" class="node teaser blog cal">
    <acronym class="calendar published" title="2011-12-19T17:06:39+01:00">
  <span class="month">Dec</span>
  <span class="day">19</span>
    <span class="year">2011</span>
    </acronym>
    <h2 class="title"><a href="/blog/how-i-my-java/index.html">How I like my Java </a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
            </div>
  <div class="content"><p>This is a repost of my article earlier posted at Jordan Sissel's awesome  <a href="http://sysadvent.blogspot.com/2011/12/day-2-strategies-for-java-deployment.html">SysAdvent</a></p>
<p>After years of working in Java-based environments, there are a number of things that I like to implement together with the teams I`m working with - the application doesn't matter much, whether it's plain java, Tomcat, JBoss, etc, these deployment strategies will help your ops and dev teams build more managable services.</p>
<h2 id="packaging">Packaging</h2>
<p>The first step is to have the native operating system packages as build artifacts rolling out of your <a href="http://martinfowler.com/articles/continuousIntegration.html">continuous integration</a> server - No .ear, .war or .jar files: I want to have rpms or debs. With things like <a href="https://github.com/jordansissel/fpm#readme">fpm</a> or the <a href="http://mojo.codehaus.org/rpm-maven-plugin/">maven rpm</a> plugin this should not be an extra hassle, and the advantages you get from doing this are priceless.</p>
<p>What advantages? Most native package systems support dependency resolution, file verification, and upgrades (or downgrades). These are things you would have to implement yourself or cobble together from multiple tools. As a bonus, your fellow sysadmins are likely already comfortable with the native package tool used on your systems, so why not do it?</p>
<h2 id="proxied-not-running-as-root">Proxied, not running as root</h2>
<p><em>Shaken, not stirred</em></p>
<p>Just like any other daemon, for security reasons, I prefer to run run Tomcat or JBoss as its own user, rather than as root. In most cases, however, only root can bind to ports below 1024, so you need to put a proxy in front. This is a convenient requirement because proxying (with something like Apache) can be used to terminate SSL connections, give improved logging (access logs, etc), and provides the ability to run multiple java application server instances on the same infrastructure.</p>
<h2 id="service-management">Service Management</h2>
<p>Lots of Java application servers have a semi functional shell script that allows you to start the service. Often, these services don't daemonize in a clean way, so that's why I prefer to use the <a href="http://wrapper.tanukisoftware.com/doc/english/download.jsp">Java Service wrapper</a> from Tanuki to manage most Java based services. With a small config file, you get a clean way to stop and start java as a service and even the possibility to add some more monitoring to it.</p>
<p>However, there are some problems the Java Service wrapper leaves unsolved. For example, after launching the service, the wrapper can return back with a successful exit code while your service is not ready yet. The application server might be ready, but your applications themselves are still starting up. If you are monitoring these applications (e.g for High Availability), you really only want to treat them as 'active' when the application is ready, so you don't want your wrapper script to return, &quot;OK,&quot; before the application has been deployed and ready. Otherwise, you end up with false positives or nodes that failover before the application has ever started. It's pretty easy to create a ping-pong service flapping scenario on a cluster this way.</p>
<h2 id="one-application-per-host">One application per host</h2>
<p>I prefer to deploy one application per host even though you can easily deploy multiple applications within a single Java VM. With one-per-host, management becomes much easier. Given the availability and popularity of good virtualization, the overhead of launching multiple Linux VM's for different applications is so low that there are more benefits than disadvantages.</p>
<h2 id="configuration">Configuration</h2>
<p>What about configuration of the application? Where should remote API urls, database settings, and other tunables go? A good approach is to create a standard location for all your applications, like <span class="geshifilter"><code class="text geshifilter-text">/etc/$vendor/app/</code></span>, where you place the appropriate configuration files. Volatile application configuration must be outside the artifact that comes out the build (.ear , .jar, .war, .rpm). The content of these files should be managed by a configuration management tool such as puppet, chef, or cfengine. The developers should be given a basic training so they can provide the systems team with the appropriate configuration templates.</p>
<h2 id="logs">Logs</h2>
<p>Logs are pretty important too, and very easy to neglect. There are plenty of alternative tools around to log from a Java application: Log4j, Logback, etc .. Use them and make sure that they are configured to log to syslog, then they can be collected centrally and parsed by tools much easier than if they were spread all over the filesystem.</p>
<h2 id="monitoring">Monitoring</h2>
<p>You also want your application to have some ways to monitor it besides just checking if it is running - it is usually insufficient to simply check if a tcp server is listening. A nice solution is to have a simple plain text page with a list of critical services and whether they are OK or not (true/false), for example:</p>
<pre class="PROGRAMLISTING"><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">someService: true</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">otherService: false</div></li></ol></pre></div></pre><p>This benefits humans as well as machines. Tools like <a href="https://mon.wiki.kernel.org/">mon</a>, <a href="http://linux-ha.org/wiki/Heartbeat">heartbeat</a> or loadbalancers can just grep for &quot;false&quot; in the file. If the file contains false, it reports a failure and fails over. This page should live on a standard location for all your applications, maybe a pattern like this http://<span class="math"><em>h</em><em>o</em><em>s</em><em>t</em>&#8197;/&#8197;</span>servicename/health.html and an example &quot;http://10.0.129.10:8080/mrs-controller/health.html&quot;. The page should be accessible as soon as the app is deployed.</p>
<p>This true/false health report should not be a static HTML file; it should be a dynamically generated page. Text means that you can also use curl, wget, or any command-line tool or browser to check the status of your service.</p>
<p>The 'health.html' page should report honestly about health, executing any code necessary to compute 'health' before yielding a result. For example, if your app is a simple calculator, it should verify health by doing tests internally like adding up some numbers before sharing 'myCalculator:true' in the health report.</p>
<p>The 'health.html' page should report honestly about health, executing any code necessary to compute 'health' before yielding a result. For example, if your app is a simple calculator, then before reporting health it should put two and two together and get four.</p>
<p>This kind of approach could also be used to provide you with metrics you can't learn from the JVM, such as number of concurrent users or other valid application metadata for measurement and trending purposes.</p>
<h2 id="conclusion">Conclusion</h2>
<p>If you can't convince your developers, then maybe more data can help: Check out Martin Jackson's (presentation on java deployments) <a href="http://www.slideshare.net/actionjackx/automated-java-deployments-with-rpm">Automated Java Deployments with RPM</a></p>
<p>With good strategies in packaging, deployment, logging, and monitoring, you are in a good position to have an easily manageable, reproducible, and scalable environment. You'll give your developers the opportunity to focus on writing the application, they can use the same setup on their local development boxes (e.g. by using vagrant) as you are using on production.</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="/blog/how-i-my-java/index.html#comments" title="Jump to the first comment of this posting.">4 comments</a></li>
</ul></div>
</div>
<div id="node-1053" class="node teaser blog cal">
    <acronym class="calendar published" title="2011-12-14T19:10:12+01:00">
  <span class="month">Dec</span>
  <span class="day">14</span>
    <span class="year">2011</span>
    </acronym>
    <h2 class="title"><a href="/blog/lisa-2011/index.html">Lisa 2011</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1328 first"><a href="/blog/category/devops/index.html" rel="tag" title="">devops</a></li>
<li class="taxonomy_term_452 last"><a href="/blog/taxonomy/term/452/index.html" rel="tag" title="">lisa</a></li>
</ul></span>
        </div>
  <div class="content"><p>Last week I was in Boston for my 1st and their 25th  Edition  of the Large Infrastructure System Administration Conferences<br />
Lisa was pretty much all I expected from it.  Old Unix wizards with long hair and white beards,  the usual suspects, and a mix of devops practitioners on  a devops themed conference with on one  side awesome and well positioned content and on the other side absolutely basic stuff.</p>
<p>On tuesday I had a devops bof scheduled for 2 hours.</p>
<p>My goal of the session was to not talk myselve, and let the audience figure out the 4 key components of devops as documented by @botchagalupe and @damonedwards being ,  Culture, Automation, Measurement and Sharing.   I have to admit it  took me a while to get them to that point .. but they figured out themselves ..  the bof was standing room only , and there was a good discussion going on</p>
<p>On wednesday I gave my talk  titled , Devops the Future is here, it's just not evenly distributed yet.</p>
<div style="width:425px" id="__ss_10506745"> <strong style="display:block;margin:12px 0 4px"><a href="http://www.slideshare.net/KrisBuytaert/devops-the-future-is-here-its-just-not-evenly-distributed-yet" title="Devops, the future is here, it&#39;s just not evenly distributed yet." target="_blank">Devops, the future is here, it&#39;s just not evenly distributed yet.</a></strong> <iframe src="http://www.slideshare.net/slideshow/embed_code/10506745" width="425" height="355" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe><br />
<div style="padding:5px 0 12px"> View more <a href="http://www.slideshare.net/" target="_blank">presentations</a> from <a href="http://www.slideshare.net/KrisBuytaert" target="_blank">Kris Buytaert</a> </div>
</div>
<p>During my talk I realized that there was some more explanation needed for the crowd explaining Vagrant ...   so I proposed a Bof on that topic too ...  I used @patrickdebois 's awesome slides and hosted a  small bof on Vagrant on thursday evening.</p>
<div style="width:425px" id="__ss_8340999"> <strong style="display:block;margin:12px 0 4px"><a href="http://www.slideshare.net/jedi4ever/vagrant-devopsdays-mountain-view-2011" title="Vagrant devopsdays Mountain View 2011" target="_blank">Vagrant devopsdays Mountain View 2011</a></strong> <iframe src="http://www.slideshare.net/slideshow/embed_code/8340999" width="425" height="355" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe><br />
<div style="padding:5px 0 12px"> View more <a href="http://www.slideshare.net/" target="_blank">presentations</a> from <a href="http://www.slideshare.net/jedi4ever" target="_blank">Patrick Debois</a> </div>
</div>
<p>Friday morning I was scheduled to be in a panel discussing featuring a #devops guy, a storage guy and a network guy ..<br />
as my voice was starting to break down I wasn't really confident . however by the time the panel started I could talk normal again :)<br />
The setup was weird.. it were basically 3 people with totally different backgrounds discussing a variety of topics.  There were no rea<br />
lly opposing views , mostly we agreed with eachother , so I`m not really sure if the audience was really entertained :)</p>
<p>Anyhow 2 bofs, a talk and a panel later .. I was exhausted and ready to fly back to Belgium.  </p>
<p>Tomorrow I have another presentation together with Patrick at the <a href="http://www.bejug.org/confluenceBeJUG/display/BeJUG/DevOps">BeJug</a> ..  problem is .. I`m still looking for my voice ;(</p>
<p>So worst case .. I`m just gonna turn on the recording that the Usenix folks made of my talk ... </p>
<p><iframe width="560" height="315" src="http://www.youtube.com/embed/p-8UBYMMjp8" frameborder="0" allowfullscreen></iframe></p>
<p>Must admit .. I've given better talks .. </p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-1052" class="node teaser blog cal">
    <acronym class="calendar published" title="2011-11-13T21:31:23+01:00">
  <span class="month">Nov</span>
  <span class="day">13</span>
    <span class="year">2011</span>
    </acronym>
    <h2 class="title"><a href="/blog/qr-encode/index.html">QR Encode</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1466 first last"><a href="/blog/category/notetoself/index.html" rel="tag" title="">notetoself</a></li>
</ul></span>
        </div>
  <div class="content"><p>For further reference .. and preventing me from googling it a 3rd time</p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">qrencode &quot;http://www.krisbuytaert.be/&quot;  -o qrcode.png  -s 10</div></li></ol></pre></div></p>
<p>or<br />
<div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">cat Kris_Buytaert.vcf  | qrencode  -o vcf.png -s 5 </div></li></ol></pre></div></p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="/blog/qr-encode/index.html#comments" title="Jump to the first comment of this posting.">2 comments</a></li>
</ul></div>
</div>
<div id="node-1051" class="node teaser blog cal">
    <acronym class="calendar published" title="2011-10-30T20:51:43+01:00">
  <span class="month">Oct</span>
  <span class="day">30</span>
    <span class="year">2011</span>
    </acronym>
    <h2 class="title"><a href="/blog/different-shade-green/index.html">A different shade of green</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1328 first"><a href="/blog/category/devops/index.html" rel="tag" title="">devops</a></li>
<li class="taxonomy_term_1465 last"><a href="/blog/category/jenkins/index.html" rel="tag" title="">jenkins</a></li>
</ul></span>
        </div>
  <div class="content"><p>Back in late 1997 I had spent way too much time helping people to build websites and was fed up with customers wanting a different shade  of green for the background of their website.   I was fed up with the graphic artists that didn't want to understand the concept of a color pallet and browser safe colors and didn't understand the differences between print and web.  So I decided to try not to work for the wannabe webexperts anymore and doing some real software.</p>
<p>Fast forward 15 years and I find myselve discussing the different shades of green  with developers ...     maybe it's time for some radical change again :)</p>
<p><img src="http://geekandpoke.typepad.com/.a/6a00d8341d3df553ef015392a77686970b-pi" WIDTH=600 /></p>
<p>You got to love <a href="http://geekandpoke.typepad.com/geekandpoke/2011/10/green-it-part-2.html">Geek &amp; Poke</a></p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-1050" class="node teaser blog cal">
    <acronym class="calendar published" title="2011-09-24T14:53:29+02:00">
  <span class="month">Sep</span>
  <span class="day">24</span>
    <span class="year">2011</span>
    </acronym>
    <h2 class="title"><a href="/blog/fall-winter-and-spring-conference-season-2011-2012/index.html">Fall , Winter and Spring Conference Season 2011 - 2012</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_558 first"><a href="/blog/taxonomy/term/558/index.html" rel="tag" title="">conferences</a></li>
<li class="taxonomy_term_1328"><a href="/blog/category/devops/index.html" rel="tag" title="">devops</a></li>
<li class="taxonomy_term_599"><a href="/blog/taxonomy/term/599/index.html" rel="tag" title="">opensource</a></li>
<li class="taxonomy_term_439 last"><a href="/blog/taxonomy/term/439/index.html" rel="tag" title="">puppet</a></li>
</ul></span>
        </div>
  <div class="content"><p><a href="http://www.jedi.be/blog/2011/09/06/what-conferences-to-attend/">Patrick</a> posted his upcoming conference schedule for the next couple of months.<br />
 as you can see there are a comple of overlapping conferences :)</p>
<p>Conferences I'm speaking at or likely to attend are:</p>
<ul>
<li>The first week of October I`ll be in the Valley ,  I`ll be late for Jenkinsconf but I hope to pick up some events while I`m there.. suggestions are welcome , I`m also heading back to Europe earlier than planned so I will miss BadCamp :( ...
</li>
<li><a href="http://devopsdays.org/events/2011-goteborg/">Devopsdays Goteborg, Sweden</a> : <i>October 14,15</i> - The yearly Europe devops event is happening in Goteborg this time. It's going to be really exciting this time , as the theme is inclusive. Eploring the boundaries of devops,  I`m once again in the organization of  this conference.</li>
<li><a href="http://t-dose.org/">T-Dose 2011</a>, The Technical Dutch Open Source Event, on 5 and 6 november 2011 , I will be talking again about my experiences with complex Puppet setups
</li>
<li><del><a href="http://citconf.com/">Citconf , London</a>: <i>November 11-12</i> - All you ever wanted to know about Continuous Integration. Period, registered, haven't booked flights yet.</del></li>
<li><a href="http://www.cloudcamp.org/ghent">Cloudcamp Belgium</a>: <i>November 21</i> - I'm looking forward to this year's event, as there will likely more practioners and less marketing folks.</li>
<li><a href="http://www.usenix.org/events/lisa11/tech/tech.html#Buytaert">Lisa 2011</a>, Boston, US,     I`m giving an Invited talk titled , Devops: The past and futre are here, It's just not evenly distributed (yet),  and I`ll be on a panel titled What Will Be HOt Next Year, really looking forward to this one :)
</li>
<li><a href="http://fosdem.org/">Fosdem.org</a> will take place on  4 and 5 February 2012 , and as every year  since it inception I'll be there </li>
<li>The UKUUG rebranded to <a href="http://www.flossuk.org/Events/Spring2012/">FlossUK</a> , they are hosting their Annual Spring conference from 20th to 22nd March in Edinburgh , given their refound focus it will be even more interresting ! </li>
<li>And as announced earlier this week <a href="http://loadays.org/">Loadays.org</a> will take place in Antwerp again this year on 31/3/2012 and 1/4/2012 , as the previous years I`m co organizing this conference</li>
</ul>
<p>And yes, I do work from time to time. Just that these conferences are a great way to capture and share new ideas. All worth it!</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-1049" class="node teaser blog cal">
    <acronym class="calendar published" title="2011-08-24T10:41:34+02:00">
  <span class="month">Aug</span>
  <span class="day">24</span>
    <span class="year">2011</span>
    </acronym>
    <h2 class="title"><a href="/blog/using-veewee/index.html">Using Veewee</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1328 first"><a href="/blog/category/devops/index.html" rel="tag" title="">devops</a></li>
<li class="taxonomy_term_439"><a href="/blog/taxonomy/term/439/index.html" rel="tag" title="">puppet</a></li>
<li class="taxonomy_term_1439"><a href="/blog/category/vagrant/index.html" rel="tag" title="">vagrant</a></li>
<li class="taxonomy_term_1464 last"><a href="/blog/category/veewee/index.html" rel="tag" title="">veewee</a></li>
</ul></span>
        </div>
  <div class="content"><p>With @dancarley and @patrickebois just discussing the origin of the name of Veewee  I figured I still had that piece of documentation I wrote up for myselve flying around ...  </p>
<p>So with no other reason than having my docs mirrored on the internet . </p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">gem install veewee</div></li></ol></pre></div></p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">veewee templates</div></li></ol></pre></div><br />
shows you what templates we have around ..</p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">$veewee init natty ubuntu-11.04-server-amd64</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Init a new box natty, starting from template ubuntu-11.04-server-amd64</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">The basebox 'natty' has been successfully created from the template ''ubuntu-11.04-server-amd64'</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">You can now edit the definition files stored in definitions/natty</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">or build the box with:</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">vagrant basebox build 'natty'</div></li></ol></pre></div></p>
<p>As noted this will generate the definition for your natty box,<br />
It will create a definition.rb file which describes your box.<br />
A preseed (or kickstart or similar file)  and a postinstall file</p>
<p>The next step is then to use vagrant to build this basebox<br />
<div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">$ vagrant  basebox build natty</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&nbsp;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Verifying the isofile ubuntu-11.04-server-amd64.iso is ok.</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Creating vm natty : 384M - 1 CPU - Ubuntu_64</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Creating new harddrive of size 10140</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">VBoxManage createhd --filename '/home/sdog/VirtualBox VMs/natty/natty.vdi' --size '10140' --format vdi &gt; /dev/null</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Attaching disk: /home/sdog/VirtualBox VMs/natty/natty.vdi</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Mounting cdrom: /home/sdog/iso/ubuntu-11.04-server-amd64.iso</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Waiting for the machine to boot</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&nbsp;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Typing:[1]: &lt;Esc&gt;&lt;Esc&gt;&lt;Enter&gt;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Typing:[2]: /install/vmlinuz noapic preseed/url=http://192.168.10.101:7122/preseed.cfg</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Typing:[3]: debian-installer=en_US auto locale=en_US kbd-chooser/method=us</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Typing:[4]: hostname=natty</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Typing:[5]: fb=false debconf/frontend=noninteractive</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Typing:[6]: keyboard-configuration/layout=USA keyboard-configuration/variant=USA console-setup/ask_detect=false </div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Typing:[7]: initrd=/install/initrd.gz -- &lt;Enter&gt;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Done typing.</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&nbsp;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Starting a webserver on port 7122</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Serving file /home/sdog/definitions/natty/preseed.cfg</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&nbsp;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Waiting for ssh login with user vagrant to sshd on port =&gt; 7222 to work</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">.....................................................................................................................................................Transferring /tmp/vbox.version20110822-6766-1xcca1e-0 to .vbox_version</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">..</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&nbsp;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&nbsp;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Step [0] was successfully - saving state</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">&nbsp;</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Waiting for ssh login with user vagrant to sshd on port =&gt; 7222 to work</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">.Transferring /home/sdog/definitions/natty/postinstall.sh to postinstall.sh</div></li></ol></pre></div><br />
Plenty more output here !</p>
<p>Be very patient ..  you will see VirtualBox launch a VM and start installing it ..</p>
<p>The next steps are clear .. vagrant tells you what you can do next</p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Now you can:</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">- verify your box by running               : vagrant basebox validate natty</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">- export your vm to a .box file by running : vagrant basebox export   natty</div></li></ol></pre></div></p>
<p>So after validating it , you can now export the basebox and share it with other people.</p>
<p>The next step is to actually use that box in your own Vagrant setup, for that you need to import the box into your box collection</p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">$ vagrant box add 'natty' 'natty.box'</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">[vagrant] Downloading with Vagrant::Downloaders::File...</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">[vagrant] Copying box to temporary location...</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">[vagrant] Extracting box...</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">[vagrant] Verifying box...</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">[vagrant] Cleaning up downloaded box...</div></li></ol></pre></div></p>
<p>To verify just run</p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">$ vagrant box list</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">Centos6</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">MyCentOS2</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">debian</div></li><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">natty</div></li></ol></pre></div></p>
<p>your freslhy imported box should be in the list .</p>
<p>You can now use<br />
<div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">config.vm.box = &quot;natty&quot;</div></li></ol></pre></div> to refer to the fresly imported box in your Vagrant file, a file that can be created by running vagrant init, or copying around another Vagrant template ..</p>
<p>After that .. regular vagrant fun starts,  up,  provision, provision, provision, destroy,  and so forth ..</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="/blog/using-veewee/index.html#comments" title="Jump to the first comment of this posting.">3 comments</a></li>
</ul></div>
</div>
<div id="node-1048" class="node teaser blog cal">
    <acronym class="calendar published" title="2011-08-21T20:55:58+02:00">
  <span class="month">Aug</span>
  <span class="day">21</span>
    <span class="year">2011</span>
    </acronym>
    <h2 class="title"><a href="/blog/devops-drupal-survey/index.html">Devops for Drupal, the survey,</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1328 first"><a href="/blog/category/devops/index.html" rel="tag" title="">devops</a></li>
<li class="taxonomy_term_484 last"><a href="/blog/taxonomy/term/484/index.html" rel="tag" title="">drupal</a></li>
</ul></span>
        </div>
  <div class="content"><p>Devops is gaining momentum, the idea that developers and operations should work much closer together , the idea that one should automate as much as possible in both their infrastructure and their release process  brings along a lot of questions, ideas and tools that need to be integrated in your daily way of working.</p>
<p>Drupal has one of the biggest development communities in the open source world,  being part of both communities  We are  trying to bridge the gap,</p>
<p>At <a href="http://www.inuits.eu/" rel="nofollow">Inuits</a> we are building tools and writing best practices to close the gap,  but we are not alone in this world and we would like to gather some feedback on how other people are deploying, and managing their Drupal environments</p>
<p>Working with Drupal, build with Drupal in mind .. how do you release your sites ..  That's what we are trying to figure out ... for everybody else to learn from</p>
<p>Oh and you can win some items of our brand new fashion line ! </p>
<p>The survey is <a href="http://surveys.inuits.eu/limesurvey/index.php?sid=81259" rel="nofollow">here</a> , please spend a bit of your time helping us to better  understand the needs of the community</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-1047" class="node teaser blog cal">
    <acronym class="calendar published" title="2011-08-21T20:53:15+02:00">
  <span class="month">Aug</span>
  <span class="day">21</span>
    <span class="year">2011</span>
    </acronym>
    <h2 class="title"><a href="/blog/back-opendbcamp-and-froscon/index.html">Back from opendbcamp  and Froscon</a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1462 first"><a href="/blog/category/froscon/index.html" rel="tag" title="">froscon</a></li>
<li class="taxonomy_term_1461"><a href="/blog/category/opendbcamp/index.html" rel="tag" title="">opendbcamp</a></li>
<li class="taxonomy_term_1463 last"><a href="/blog/category/puppet-devops/index.html" rel="tag" title="">puppet devops</a></li>
</ul></span>
        </div>
  <div class="content"><p>I`m back from my second opendbcamp this year, and my first Froscon :) </p>
<p>With Sankt Augustin being only a 2.5 hour drive , it was one of the only conferences in Europe so close to home that I hadn't visited yet.    Overall it's a good conference,  it's a good sized, not too crowded event which attracted a bunch of interesting speakers. </p>
<p>Sadly they managed to do way to much changes to the schedule last minute which were not updated in their Android app.. so I ended up arriving in the wrong room multiple times ..  Also Sadly German conferences still tend to have way to much German language presentations,  for foreign speakers from different parts of the world that limits the choice of talks they can visit.</p>
<p>I gave 2 talks today in Sankt Augustin,   I opened the Devops Track today with a general introduction to Devops,  the talk was fairly well attended given it was on a Sunday morning right after the social event and plenty of people had questions.</p>
<div style="width:425px" id="__ss_8948134"> <strong style="display:block;margin:12px 0 4px"><a href="http://www.slideshare.net/KrisBuytaert/devops-devops-devops-at-froscon" title="Devops Devops Devops, at Froscon" target="_blank">Devops Devops Devops, at Froscon</a></strong> <iframe src="http://www.slideshare.net/slideshow/embed_code/8948134" width="425" height="355" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe><br />
<div style="padding:5px 0 12px"> View more <a href="http://www.slideshare.net/" target="_blank">presentations</a> from <a href="http://www.slideshare.net/KrisBuytaert" target="_blank">Kris Buytaert</a> </div>
</div>
<p>My second talk of the day was about my experience puppetizing SipX,  it felt pretty weird having to give an introduction to Puppet in the slot after <a href="http://www.kartar.net/">James</a> ,  apart from the session chair telling me I had only 5 minutes left about 25 minutes into my talk and the microphone breaking twice on me it went fairly well,  it was even attended by a dog. </p>
<div style="width:425px" id="__ss_8948142"> <strong style="display:block;margin:12px 0 4px"><a href="http://www.slideshare.net/KrisBuytaert/automating-complex-infrastructures-with-puppet" title="Automating complex infrastructures with Puppet" target="_blank">Automating complex infrastructures with Puppet</a></strong> <iframe src="http://www.slideshare.net/slideshow/embed_code/8948142" width="425" height="355" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe><br />
<div style="padding:5px 0 12px"> View more <a href="http://www.slideshare.net/" target="_blank">presentations</a> from <a href="http://www.slideshare.net/KrisBuytaert" target="_blank">Kris Buytaert</a> </div>
</div>
<p>Time permitting, Froscon is a conference I might visit again :) </p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first last"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
</ul></div>
</div>
<div id="node-1045" class="node teaser blog cal">
    <acronym class="calendar published" title="2011-07-17T22:39:27+02:00">
  <span class="month">Jul</span>
  <span class="day">17</span>
    <span class="year">2011</span>
    </acronym>
    <h2 class="title"><a href="/blog/drupal-and-configuration-mgmt-were-getting-there/index.html">Drupal and Configuration Mgmt, we&#039;re getting there ... </a></h2>
      <div class="submitted">
          <span class="author">By: Kris Buytaert</span>
              <span class="taxonomy">Tags: <ul class="links inline"><li class="taxonomy_term_1158 first"><a href="/blog/category/chef/index.html" rel="tag" title="">chef</a></li>
<li class="taxonomy_term_440"><a href="/blog/taxonomy/term/440/index.html" rel="tag" title="">configuration management</a></li>
<li class="taxonomy_term_1161"><a href="/blog/category/deployment/index.html" rel="tag" title="">deployment</a></li>
<li class="taxonomy_term_1328"><a href="/blog/category/devops/index.html" rel="tag" title="">devops</a></li>
<li class="taxonomy_term_484"><a href="/blog/taxonomy/term/484/index.html" rel="tag" title="">drupal</a></li>
<li class="taxonomy_term_461"><a href="/blog/taxonomy/term/461/index.html" rel="tag" title="">open source</a></li>
<li class="taxonomy_term_439 last"><a href="/blog/taxonomy/term/439/index.html" rel="tag" title="">puppet</a></li>
</ul></span>
        </div>
  <div class="content"><p>For those who haven't noticed yet .. I`m into devops  .. I`m also a little bit into Drupal, (blame my last name..)  ,  so one of the frustrations I've been having with Drupal (an much other software) is the automation of deployment and upgrades of Drupal sites ... </p>
<p>So for the past couple of days  I've been trying to catch up to the ongoing discussion regarding the results of the <a href="http://groups.drupal.org/node/155559" rel="nofollow">configuration mgmt  sprint</a> , I've been looking at it mainly from a systems point of view , being  with the use of Puppet/ Chef or similar tools in mind ..  I know I`m late to the discussion but hey , some people take holidays in this season :)   So below you can read a bunch of my comments ... and thoughts on the topic ..</p>
<p>First of all , to me JSON looks like a valid option.<br />
Initially there was the plan to wrap the JSON in a PHP header for "security" reasons, but that seems to be gone even while nobody mentioned the problems that would have been caused for external configuration management tools.<br />
When thinking about external tools that should be capable of mangling the file plenty of them support JSON but won't be able to recognize a JSON file with a weird header ( thinking e.g about Augeas  (augeas.net) , I`m not talking about IDE's , GUI's etc  here, I`m talking about system level tools and libraries  that are designed to mangle standard files.   For Augeas we could create a separate lens to manage these files , but other tools might have bigger problems with the concept.</p>
<p>As <a href="http://groups.drupal.org/node/155559#comment-520134" rel="nofollow">catch</a> suggest a clean .htaccess should be capable of preventing people to access the .json files  There's other methods to figure out if files have been tampered with , not sure if this even fits within Drupal  (I`m thinking about reusing existing CA setups rather than having yet another security setup to manage) , </p>
<p>In general to me tools such as puppet should be capable of modifying config files , and then activating that config with no human interaction required , obviously drush is a good candidate here to trigger the system after the config files have been change, but unlike some people think having to browse to a web page to confirm the changes is not an acceptable solution.  Just think about having to do this on multiple environments ... manual actions are error prone.. </p>
<p>Apart from that I also think the storing of the certificates should not be part of the file.  What about a meta file with the appropriate checksums ?  (Also if I`m using Puppet or any other tool to manage my config files then the security , preventing to tamper these  files, is already covered by the configuration management tools,  I do understand that people want to build Drupal in the most secure way possible, but I don't think this belongs in any web application.  </p>
<p>When I look at other similar discussions that wanted to provide a similar secure setup they ran into a lot of end user problems with these kind of setups,  an alternative approach is to make this configurable and or plugable.   The default approach should be to have it enable, but the more experienced users should have the opportunity to disable this, or replace it with another framework.   Making it plugable upfront solves a lot of hassle later.</p>
<p>Someone in the discussion noted :<br />
"One simple suggestion for enhancing security might be to make it possible to omit the secret key file and require the user to enter the key into the UI or drush in order to load configuration from disk."</p>
<p>Requiring the user to enter a key in the UI or drush would be counterproductive in the goal one wants to achieve,  the last thing you want as a requirement is manual/human interaction when automating setups.   therefore a feature like this should never be implemented  </p>
<p>Luckily there seems to be  new idea around <a href="http://groups.drupal.org/node/157379" rel="nofollow">that</a> doesn't plan on using a raped json file<br />
<cite>instead of storing the config files in a standard place, we store them in a directory that is named using a hash of your site's private key, like sites/default/config_723fd490de3fb7203c3a408abee8c0bf3c2d302392. The files in this directory would still be protected via .htaccess/web.config, but if that protection failed then the files would still be essentially impossible to find. This means we could store pure, native .json files everywhere instead, to still bring the benefits of JSON (human editable, syntax checkable, interoperability with external configuration management tools, native + speedy encoding/decoding functions), without the confusing and controversial PHP wrapper.</cite></p>
<p>Figuring out the directory name for the configs from a configuration mgmt tool then could be done by something similar to  </p>
<p><div class="geshifilter"><pre class="text geshifilter-text" style="font-family:monospace;"><ol><li style="font-family: monospace; font-weight: normal;"><div style="font-family: monospace; font-weight: normal; font-style: normal">cd sites/default/conf/$(ls sites/default/conf|head -1)</div></li></ol></pre></div></p>
<p>In general I think the proposed setup looks acceptable , it definitely goes in the right direction of providing systems people with a way to automate the deployment of Drupal sites and applications at scale.</p>
<p>I`ll be keeping a eye on both the direction they are heading into and the evolution of the code !</p>
</div>
  <div class="links">&raquo; <ul class="links inline"><li class="blog_usernames_blog first"><a href="/blog/blogs/kris-buytaert/index.html" title="Read Kris Buytaert&#039;s latest blog entries.">Kris Buytaert&#039;s blog</a></li>
<li class="comment_comments last"><a href="/blog/drupal-and-configuration-mgmt-were-getting-there/index.html#comments" title="Jump to the first comment of this posting.">2 comments</a></li>
</ul></div>
</div>
<div class="item-list"><ul class="pager"><li class="pager-first first"><a href="index.html" title="Go to first page" class="active"> first</a></li>
<li class="pager-previous"><a href="index5.html?page=5" title="Go to previous page" class="active"> previous</a></li>
<li class="pager-ellipsis"></li>
<li class="pager-item"><a href="index2.html?page=2" title="Go to page 3" class="active">3</a></li>
<li class="pager-item"><a href="index3.html?page=3" title="Go to page 4" class="active">4</a></li>
<li class="pager-item"><a href="index4.html?page=4" title="Go to page 5" class="active">5</a></li>
<li class="pager-item"><a href="index5.html?page=5" title="Go to page 6" class="active">6</a></li>
<li class="pager-current">7</li>
<li class="pager-item"><a href="index7.html?page=7" title="Go to page 8" class="active">8</a></li>
<li class="pager-item"><a href="index8.html?page=8" title="Go to page 9" class="active">9</a></li>
<li class="pager-item"><a href="index9.html?page=9" title="Go to page 10" class="active">10</a></li>
<li class="pager-item"><a href="index10.html?page=10" title="Go to page 11" class="active">11</a></li>
<li class="pager-ellipsis"></li>
<li class="pager-next"><a href="index7.html?page=7" title="Go to next page" class="active">next </a></li>
<li class="pager-last last"><a href="index104.html?page=104" title="Go to last page" class="active">last </a></li>
</ul></div></div>
</div>

</div>

<div id="footer" class="footer">
  No really .. everything is a funky DNS problem , you'll realise I`m right pretty soon !   
  <p class="credits">Powered by <a href="http://www.drupal.org/">Drupal</a> and the <a href="http://www.drupal.org/project/barlow">Barlow</a> theme by <a href="http://egonbianchet.net/">Egon Bianchet</a>.</p>
</div>

</div>

</body>
</html>
